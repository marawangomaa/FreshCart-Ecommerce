import"./chunk-4Y3QGAQQ.js";import{a as F,b as V}from"./chunk-XPTTH6VF.js";import"./chunk-WXI33M2S.js";import{j as P}from"./chunk-GILTXZ6W.js";import{Ca as w,Ea as m,Eb as E,Fa as p,I as _,K as h,Oa as o,Pa as x,Qa as b,R as d,S as u,Wa as T,Ya as I,aa as g,ab as v,ca as s,cb as S,pa as C,qb as D,va as y,wa as k,xa as r,ya as n,za as f}from"./chunk-LLAJZWTY.js";var $=(a,c)=>c.product.id,B=a=>["/orders",a];function M(a,c){if(a&1){let l=w();r(0,"div",4)(1,"div",6)(2,"div",7),f(3,"img",8),n(),r(4,"div",9)(5,"h3"),o(6),n(),r(7,"span",10),o(8),v(9,"currency"),n(),r(10,"div",11)(11,"button",12),m("click",function(){let e=d(l).$implicit,i=p();return u(i.updateCount(e.product.id,e.count+1))}),o(12,"+"),n(),r(13,"span",13),o(14),n(),r(15,"button",12),m("click",function(){let e=d(l).$implicit,i=p();return u(i.updateCount(e.product.id,e.count-1))}),o(16,"-"),n()(),r(17,"div")(18,"button",14),m("click",function(){let e=d(l).$implicit,i=p();return u(i.removeItem(e.product.id))}),f(19,"i",15),o(20," Remove "),n()()()()()}if(a&2){let l=c.$implicit;s(3),C("src",l.product.imageCover,g)("alt",l.product.title),s(3),x(l.product.title),s(2),b("Price : ",S(9,5,l.price,"GBP"),""),s(6),x(l.count)}}var q=(()=>{let c=class c{constructor(){this._CartService=_(F),this._ToastrService=_(V),this.cartDetails={}}ngOnInit(){this._CartService.getProductsCart().subscribe({next:t=>{console.log(t.data),this.cartDetails=t.data},error:t=>{console.log(t)}})}removeItem(t){this._CartService.deletSpecifecCartItem(t).subscribe({next:e=>{console.log(e),this._ToastrService.error("Item deleted successfully"),this.cartDetails=e.data,this._CartService.cartNumber.next(e.numOfCartItems)},error:e=>{console.log(e)}})}updateCount(t,e){e>0&&this._CartService.updateProductQuantity(t,e).subscribe({next:i=>{console.log(i),this.cartDetails=i.data},error:i=>{console.log(i)}})}clearItems(){this._CartService.clearCart().subscribe({next:t=>{console.log(t),t.message=="success"&&(this.cartDetails={},this._CartService.cartNumber.next(0),this._ToastrService.error("Cart successfully cleared"))},error:t=>{console.log(t)}})}ngOnDestroy(){this.getAllCartSubscription?.unsubscribe()}};c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=h({type:c,selectors:[["app-cart"]],standalone:!0,features:[T],decls:13,vars:7,consts:[[1,"d-flex","justify-content-between"],[1,"fw-bolder","text-main"],[1,"btn","btn-outline-danger","my-auto",3,"click"],[1,"text-main"],[1,"my-2"],[1,"btn-main",3,"routerLink"],[1,"bg-main-light","rounded-4","p-4","shadow","d-flex"],[1,"me-2"],[1,"cart-img","w-100","rounded",3,"src","alt"],[1,"ms-2","d-flex","flex-column","justify-content-between"],[1,"my-3","text-muted"],[1,"my-4"],[1,"btn","fs-1","border-bottom","border-end",3,"click"],[1,"mx-2"],[1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(e,i){e&1&&(r(0,"section")(1,"div",0)(2,"h1",1),o(3,"MY CART :"),n(),r(4,"button",2),m("click",function(){return i.clearItems()}),o(5," Clear Cart"),n()(),r(6,"p",3),o(7),v(8,"currency"),n(),y(9,M,21,8,"div",4,$),r(11,"button",5),o(12,"Orders"),n()()),e&2&&(s(7),b("Total Cart Proce : ",S(8,2,i.cartDetails.totalCartPrice,"GBP")," "),s(2),k(i.cartDetails.products),s(2),C("routerLink",I(5,B,i.cartDetails._id)))},dependencies:[D,P,E]});let a=c;return a})();export{q as CartComponent};
